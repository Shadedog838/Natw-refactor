!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(1),function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(2)},,function(e,t,n){"use strict";var o=n(3),i=n(5),r=n(7),a=n(4),s=a.$,c=a.each;window.onload=function(){setTimeout((function(){return window.scrollTo(0,0)}),0)},i(),o(),r();var l=s(".menu .toggle"),u=s(".menu nav"),d=document.body;function f(e){l.classList.remove("active"),l.children[1].innerHTML="Menu",u.classList.remove("active"),d.removeEventListener("click",f)}l.addEventListener("click",(function(){u.classList.contains("active")||(l.classList.add("active"),l.children[1].innerHTML="Close",u.classList.add("active"),setTimeout((function(){return d.addEventListener("click",f)}),0))}));var p=s(".recent-posts");s(".recent-posts .toggle-container").addEventListener("click",(function(){p.classList.contains("active")?p.classList.remove("active"):p.classList.add("active")})),s(".menu .introduction-toggle").addEventListener("click",(function(){s(".first-visit").classList.add("active"),window.scrollTo(0,0)})),c(s("a[data-anchor]"),(function(e){e.addEventListener("click",(function(){window.scrollTo(0,s(e.dataset.anchor).offsetTop-s("header").clientHeight)}))}))},function(e,t,n){"use strict";var o=n(4),i=o.$,r=o.each,a=o.findParent,s=o.animateProperty;e.exports=function(){r(i(".g-article-list ul"),(function(e){var t=e.children.length;e.style.width=250*t+30*t-1+"px",e.style.display="block"})),r(i(".g-article-list .right-arrow"),(function(e){e.addEventListener("click",(function(){var t=a(e,".g-article-list");s(t,"scrollLeft",280,200)}))})),r(i(".g-article-list .left-arrow"),(function(e){e.addEventListener("click",(function(){var t=a(e,".g-article-list");s(t,"scrollLeft",-280,200)}))}))}},function(e,t){"use strict";t.$=function(e){var t=document.querySelectorAll(e);return t.length<2?t[0]:t},t.findParent=function e(t,n){var o=n[0];if("."===o){if(t.classList.contains(n.substr(1)))return t}else if("#"===o){if(t.id===n.substr(1))return t}else if(t.tagName.toLowerCase()===n)return t;if(t.parentNode.tagName)return e(t.parentNode,n)},t.findChild=function e(t,n){for(var o=n[0],i=0;i<t.children.length;i++){var r=t.children[i];if("."===o){if(r.classList.contains(n.substr(1)))return r}else if("#"===o){if(r.id===n.substr(1))return r}else if(r.tagName.toLowerCase()===n)return r;if(r.children.length)return e(r,n)}},t.each=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)},t.animateProperty=function(e,t,n,o){var i=0,r=e[t],a=o/10,s=setInterval((function(){var o,s;i++,e[t]=(o=i,s=(o/=a)*o,r+n*(s*o*-2+3*s))}),10);setTimeout((function(){return clearInterval(s)}),o)}},function(e,t,n){"use strict";var o=n(4),i=o.$,r=o.each,a=n(6);e.exports=function(){a.get("visited")||i(".first-visit").classList.add("active"),a.get("visited")&&!a.get("visited2")&&i(".all-visits").classList.add("active"),[".first-visit .button",".first-visit .underlay"].forEach((function(e){i(e).addEventListener("click",(function(){a.set("visited",!0),window.scrollTo(0,0)}))})),[".all-visits .button",".all-visits .underlay"].forEach((function(e){i(e).addEventListener("click",(function(){a.set("visited2",!0,121e4),window.scrollTo(0,0)}))})),r(i(".g-modal .button, .g-modal .underlay"),(function(e){e.addEventListener("click",(function(){r(i(".g-modal"),(function(e){return e.classList.remove("active")}))}))}))}},function(e,t){"use strict";e.exports={get:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(e,t,n,o,i,r){if(!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;var a="";if(n)switch(n.constructor){case Number:a=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:a="; expires="+n;break;case Date:a="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+a+(i?"; domain="+i:"")+(o?"; path="+o:"")+(r?"; secure":""),!0}}},function(e,t,n){"use strict";var o=n(4),i=o.$,r=o.each,a=n(8);function s(e){return"<div class='popup-container'>"+e+"</div>"}function c(e,t){var n=document.querySelector(".post-container");l(),function(e,t){var n=e.getZoom();e.setView([t.lat,t.lng],n<3?3:n)}(e,{lat:t.latitude,lng:t.longitude}),n.querySelector(".content").innerHTML=a(t),n.classList.add("active"),document.querySelector(".post-container .close").addEventListener("click",(function(){u()}))}function l(){for(var e=document.querySelectorAll(".niel-icon"),t=0;t<e.length;++t)e[t].classList.remove("active")}function u(){var e=document.querySelector(".post-container");e.classList.remove("active"),e.querySelector(".content").innerHTML=""}e.exports=function(){document.addEventListener("DOMContentLoaded",(function(){var e=function(e){var t={type:"FeatureCollection",features:[]};return e.forEach((function(e){t.features.push({type:"Feature",geometry:{type:"Point",coordinates:[e.latitude,e.longitude]},properties:{id:e.id,post_type:e.post_type,post_text:e.post_text,username:e.username,asset_url:e.asset_url,longitude:e.longitude,latitude:e.latitude,video_placeholder:e.video_placeholder,location_name:e.location_name,instagram_id:e.instagram_id}})})),t}(data);L.mapbox.accessToken="pk.eyJ1IjoibmllbHNlbi1kZXYiLCJhIjoiY2l2bGZyMWF0MGNpbTJ0bHZ0N3p5a3BybiJ9.wUgjgKrY9oNMgpNhdLenlw";var t=L.map("map-container",{minZoom:2,maxZoom:11,maxBounds:[[-90,-270],[90,270]],scrollWheelZoom:!1,zoomControl:!1});new L.Control.Zoom({position:"bottomright"}).addTo(t),t.on("click",(function(){u(),l()})),t.setView([20,0],2);var n=L.mapbox.featureLayer().setGeoJSON(e),o=new L.MarkerClusterGroup({showCoverageOnHover:!1}),a=L.Marker.extend({options:{postType:""}});L.mapbox.styleLayer("mapbox://styles/nielsen-dev/civskrmpe000o2jukscda67je").addTo(t),n.getGeoJSON().features.forEach((function(e){o.addLayer(new a(e.geometry.coordinates,{icon:L.divIcon({className:"niel-icon",iconSize:null,iconAnchor:[15,40],postType:e.properties.post_type})}).on("click",(function(n){n.target._icon.classList.add("active"),c(t,e.properties)})).on("mouseover",(function(n){L.popup({offset:[0,-33]}).setLatLng(n.latlng).setContent(s("<p>"+(e.properties.video_placeholder?"1 Video":"1 Image")+"</p>")).openOn(t)})).on("mouseout",(function(e){t.closePopup()})))})),o.on("clustermouseover",(function(e){L.popup({offset:[0,-10],className:"cluster-popup"}).setLatLng(e.latlng).setContent(function(e){var t={video:0,image:0},n="";e.forEach((function(e){"image"===e.options.icon.options.postType?t.image+=1:t.video+=1})),n=0===t.video?"<p>"+t.image+" Image"+(t.image>1?"s":"")+"</p>":0===t.image?"<p>"+t.video+" Video"+(t.video>1?"s":"")+"</p>":"<p>"+t.video+" Video"+(t.video>1?"s":"")+"<br />"+t.image+" Image"+(t.image>1?"s":"")+"</p>";return s(n)}(e.layer.getAllChildMarkers())).openOn(t)})).on("clustermouseout",(function(e){t.closePopup()})).on("clusterclick",(function(e){t.closePopup()})),t.addLayer(o),r(i(".recent-posts li"),(function(e){e.addEventListener("click",(function(){c(t,e.dataset)}))}))}),!1)}},function(e,t){var n=function(e){var t=/["&<>]/.exec(e);if(!t)return e;var n,o,i,r="";for(n=t.index,o=0;n<e.length;n++){switch(e.charCodeAt(n)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}o!==n&&(r+=e.substring(o,n)),o=n+1,r+=i}return o!==n?r+e.substring(o,n):r};e.exports=function(e){var t,o=e||{};return function(e,o,i,r,a){t='<div class="media">'+(""===e?'<img src="'+n(a)+'">':'<video controls poster="'+n(a)+'"><source src="'+n(e)+'"></video>')+'</div>\n<div class="description">\n  <p>'+n(r)+'</p>\n  <div class="location">'+n(i)+'</div>\n</div>\n<div class="actions pin">\n  <a class="external" href="https://www.instagram.com/p/'+n(o)+'" target="_blank">View Post</a>\n  <a class="close">Close</a>\n</div>\n'}.call(this,"asset_url"in o?o.asset_url:"undefined"!=typeof asset_url?asset_url:void 0,"instagram_id"in o?o.instagram_id:"undefined"!=typeof instagram_id?instagram_id:void 0,"location_name"in o?o.location_name:"undefined"!=typeof location_name?location_name:void 0,"post_text"in o?o.post_text:"undefined"!=typeof post_text?post_text:void 0,"video_placeholder"in o?o.video_placeholder:"undefined"!=typeof video_placeholder?video_placeholder:void 0),t}}])},function(e,t,n){"use strict";n.r(t)}]);
//# sourceMappingURL=main.js.map